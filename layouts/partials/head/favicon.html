{{- $default := "img/default-favicon.png" -}}
{{- $favPath := $default -}}
{{- with .Site.Params.favicon -}}{{- $favPath = . -}}{{- end -}}

{{- $res := resources.Get $favPath -}}
{{- if $res -}}
  {{- if eq $res.MediaType.SubType "svg" -}}
    <link rel="icon" href="{{ $res.RelPermalink }}" />
  {{- else -}}
    {{- $ico := $res.Resize "32x" -}}
    <link rel="icon" href="{{ $ico.RelPermalink }}" />
  {{- end -}}
{{- else -}}
  <link rel="icon" href="{{ $favPath | relURL }}" />
{{- end -}}
